# ═══════════════════════════════════════════════════════════════
#                    TrendRadar 配置文件
#                      Version: 1.2.0
# ═══════════════════════════════════════════════════════════════

app:
  timezone: "Asia/Shanghai"          # 固定北京时间，匹配交易时段
  show_version_update: false         # 关闭版本更新提示，减少干扰

# 数据源：仅保留财联社热门（cls-hot），杜绝无关内容
platforms:
  enabled: true
  sources:
    - id: "cls-hot"
      name: "财联社热门"

# 关闭RSS订阅，仅聚焦财联社核心内容
rss:
  enabled: false
  freshness_filter:
    enabled: true
    max_age_days: 3
  feeds: []

# 报告模式：增量推送（仅新消息才推，无重复）
report:
  mode: "incremental"                # 核心：避免重复推送，适合实时监控
  display_mode: "keyword"            # 按关键词分组（电报加红/个股/北交所新股）
  sort_by_position_first: false
  rank_threshold: 5
  max_news_per_keyword: 8            # 每个关键词最多8条，防信息过载

# 推送内容控制：仅保留新增+匹配热榜，关闭所有冗余区域
display:
  region_order:
    - new_items
    - hotlist
  regions:
    hotlist: true
    new_items: true
    rss: false
    standalone: false
    ai_analysis: false               # 关闭AI，节省资源

# 推送通知：核心→仅启用飞书机器人，交易时段推送
notification:
  enabled: true
  # 推送时间窗口：北交所/A股交易时段（09:15-15:30）
  push_window:
    enabled: true
    start: "09:15"
    end: "15:30"
    once_per_day: false              # 窗口内每次定时都推送，适配GitHub cron

  # 推送渠道：仅启用飞书，关闭所有其他渠道
  channels:
    feishu:
      webhook_url: "${{ secrets.FEISHU_WEBHOOK_URL }}"  # 从GitHub Secrets读取，安全无硬编码
      msg_type: "markdown"            # 飞书群机器人适配markdown，排版更清晰
    # 以下渠道全部关闭
    dingtalk: {webhook_url: ""}
    wework: {webhook_url: "", msg_type: "markdown"}
    telegram: {bot_token: "", chat_id: ""}
    email: {from: "", password: "", to: "", smtp_server: "", smtp_port: ""}
    ntfy: {server_url: "https://ntfy.sh", topic: ""}
    bark: {url: ""}
    slack: {webhook_url: ""}
    generic_webhook: {webhook_url: "", payload_template: ""}

# 存储配置：适配GitHub Actions临时环境，关闭冗余文件
storage:
  backend: "auto"
  formats:
    sqlite: true                      # 主存储必须启用
    txt: false                        # 关闭TXT快照
    html: false                       # 关闭HTML报告
  local: {data_dir: "output", retention_days: 0}
  remote: {retention_days: 0, endpoint_url: "", bucket_name: "", access_key_id: "", secret_access_key: "", region: ""}
  pull: {enabled: false}

# AI配置：全部关闭，避免无意义的API消耗
ai:
  model: "deepseek/deepseek-chat"
  api_key: ""
  api_base: ""
  timeout: 120
  temperature: 1.0
  max_tokens: 5000
  num_retries: 1
  fallback_models: []

ai_analysis: {enabled: false}
ai_translation: {enabled: false}

# 高级设置：保持默认，关闭调试
advanced:
  debug: false
  version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version"
  mcp_version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version_mcp"
  configs_version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version_configs"
  crawler: {request_interval: 2000, use_proxy: false, default_proxy: "http://127.0.0.1:10801"}
  rss: {request_interval: 1000, timeout: 15, use_proxy: false, proxy_url: ""}
  weight: {rank: 0.6, frequency: 0.3, hotness: 0.1}
  max_accounts_per_channel: 3
  batch_size: {default: 4000, dingtalk: 20000, feishu: 30000, bark: 4000, slack: 4000}
  batch_send_interval: 3
  feishu_message_separator: "━━━━━━━━━━━━━━━━━━━"
